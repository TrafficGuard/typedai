<h2>Create New Vibe Session</h2>
<form [formGroup]="wizardForm" (ngSubmit)="onSubmit()">
	<mat-form-field appearance="fill">
		<mat-label>Title</mat-label>
		<input matInput formControlName="title" required />
		<mat-error *ngIf="wizardForm.get('title')?.hasError('required')">Title is required</mat-error>
	</mat-form-field>

	<mat-form-field appearance="fill">
		<mat-label>Instructions</mat-label>
		<textarea matInput formControlName="instructions" rows="5" required></textarea>
		<mat-error *ngIf="wizardForm.get('instructions')?.hasError('required')">Instructions are required</mat-error>
	</mat-form-field>

	<div class="form-field-spacing">
		<mat-label>Repository Source</mat-label>
		<mat-radio-group formControlName="repositorySource" aria-label="Select repository source">
			<mat-radio-button value="local">Local Folder</mat-radio-button>
			<mat-radio-button value="github">GitHub</mat-radio-button>
			<mat-radio-button value="gitlab">GitLab</mat-radio-button>
			<!-- Add more sources if needed -->
		</mat-radio-group>
		<mat-error *ngIf="wizardForm.get('repositorySource')?.hasError('required')">Repository source is required</mat-error>
	</div>

	<mat-form-field appearance="fill">
		<mat-label>Repository Identifier</mat-label>
		<input matInput formControlName="repositoryId" required />
		<mat-hint>e.g., local path, 'owner/repo', 'group/project'</mat-hint>
		<mat-error *ngIf="wizardForm.get('repositoryId')?.hasError('required')">Repository Identifier is required</mat-error>
	</mat-form-field>

	<mat-form-field appearance="fill">
		<mat-label>Repository Name (Optional)</mat-label>
		<input matInput formControlName="repositoryName" />
		<mat-hint>e.g., 'my-cool-project'</mat-hint>
	</mat-form-field>

	<mat-form-field appearance="fill">
		<mat-label>Branch</mat-label>
		<input matInput formControlName="branch" required />
		<mat-error *ngIf="wizardForm.get('branch')?.hasError('required')">Branch is required</mat-error>
	</mat-form-field>

	<mat-form-field appearance="fill">
		<mat-label>New Branch Name (Optional)</mat-label>
		<input matInput formControlName="newBranchName" />
		<mat-hint>If blank, changes will be committed to the base branch.</mat-hint>
	</mat-form-field>

	<div class="form-field-spacing">
		<mat-checkbox formControlName="useSharedRepos">Use Shared Repositories</mat-checkbox>
		<mat-hint>Allow the agent to access repositories shared across users.</mat-hint>
	</div>

	<div class="actions">
		<button mat-raised-button color="primary" type="submit" [disabled]="wizardForm.invalid || isSubmitting">
			{{ isSubmitting ? 'Starting...' : 'Start Vibe Session' }}
		</button>
		<!-- Optional: Add a cancel button -->
		<!-- <button mat-button type="button" [routerLink]="['/vibe']">Cancel</button> -->
	</div>
</form>
