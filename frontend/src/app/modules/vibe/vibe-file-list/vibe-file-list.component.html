<div *ngIf="files?.length" class="sm:col-span-2">
    <div class="font-semibold mb-2">Selected Files:</div>
    <!-- Use mat-list for file display -->
    <mat-list dense>
        <mat-list-item *ngFor="let file of files" class="h-auto! py-3 group">
            <div class="flex flex-col w-full">
                <div class="flex items-center">
                    <mat-icon matListItemIcon *ngIf="file.readOnly" class="mr-2 text-gray-500" matTooltip="Read Only">lock</mat-icon>
                    <span class="text-secondary break-all flex-grow font-medium">{{ file.filePath }}</span>
                    <button
                        mat-icon-button
                        class="ml-auto opacity-0 group-hover:opacity-100 transition-opacity duration-150"
                        [disabled]="file.readOnly || !allowDeletion"
                        [matTooltip]="allowDeletion ? 'Delete File' : 'Deletion disabled in current state'"
                        (click)="deleteFile(file)">
                        <mat-icon svgIcon="heroicons_outline:trash" [class.text-red-500]="allowDeletion" [class.text-gray-400]="!allowDeletion"></mat-icon>
                    </button>
                </div>
                <div *ngIf="file.reason" class="text-xs text-gray-600 ml-8 mt-1" data-testid="file-reason">
                    <strong>Reason:</strong> {{ file.reason }}
                </div>
                <div *ngIf="file.category" class="text-xs text-gray-500 ml-8 mt-1" data-testid="file-category">
                    <strong>Category:</strong> <span class="capitalize">{{ file.category.replace('_', ' ') }}</span>
                </div>
            </div>
        </mat-list-item>
    </mat-list>
</div>
