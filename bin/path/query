#!/bin/bash

# Query a repository and get answers with citations
# Usage: query "How does the authentication system work?"
#        query -h "Explain the complete data flow architecture"
#        query --initial-files=src/auth.ts "How does this work?"

if [ -z "$TYPEDAI_HOME" ]; then
  echo "Error: TYPEDAI_HOME is not set."
  exit 1
fi

CWD=$(pwd)

(
  cd "$TYPEDAI_HOME"
  LOG_LEVEL=fatal pnpm run query -- --fs="${CWD}" "$@"
)
